---
title: Googlemap
---
# Googlemap #

## Purpose ##

Adds a map to the target div centered on the location specified by the user. See below for a variety of map options.

**New for 1.5.12:** The Google Maps API now requires an API key in order to load.  We recommend setting the API key globally before popcorn events are loaded, using the `.defaults()` method of the Popcorn object.  Here is an example: 

``` javascript
var p = Popcorn( "#video" )
  .defaults ('googlemap', {
    target: 'map',
    apiKey: 'YOUR_API_KEY_HERE'
})

```
It is of course also possible to set the API Key individually for each map, but the API will in any case only ever be loaded once, so all calls to the mapping API will be attributed to the same maps user.

[See the Google Maps API docs](https://developers.google.com/maps/documentation/javascript/get-api-key) for instructions on how to create an API key and set permissions appropriately. 

## Options ##

* **start** \[Number\] - is the time \[in seconds\] when you want the Googlemap to appear.
* **end** \[Number\] - is the time \[in seconds\] when you want the Googlemap to become hidden.
* **target** \[String\] - Target is the id of the DOM element that you want the map to appear in. This element must be in the DOM
* **apiKey** \[String\] - is your own Google Maps API Key, required as of June 11, 2018 (**new parameeter as of 1.5.12**) 
* **type** \[String, optional\] - either: HYBRID (default), ROADMAP, SATELLITE, TERRAIN, STREETVIEW
* **zoom** \[Number, optional\] - defaults to 0
* **heading** \[Number, optional\] - STREETVIEW orientation of camera in degrees relative to true north (0 north, 90 true east, etc)
* **pitch** \[Number, optional\] - STREETVIEW vertical orientation of the camera (between 1 and 3 is recommended)
* **lat** \[Number\] - The Latitude that the map should be centered on.
* **lng** \[Number\] - The Longitude that the map should be centered on. (NOTE: Lat and Lng bust be specified if no Location is provided.)
* **location** \[String\] - An address/location to center the map on. Must be present if lat and lng are not specified.
* **onmaploaded** \[Function, optional\] - A callback function that gets fired once the map has loaded. The callback function also receives the options object as well as a reference to the map object.

*Note:* using location requires extra loading time, also not specifying both lat/lng and location will
cause and error.

## Tweening ##

Tweening animates a streetview from one location to another.

* **location** \[String\] - The start point when using an auto generated route
* **interval** \[Number\] - is the speed in which the tween will be executed, a reasonable time is 1000 (time in milliseconds)
* **heading**, **Zoom**, and **Pitch** \[Number\] -  streetview values are also used in tweening with the autogenerated route (see above)
* **tween** \[Object\] - An array of objects, each containing data for one frame of a tween
* **position** \[Object\] - An object with two keys, lat and lng, both which are mandatory for a tween to work
* **pov** \[Object\] - An object which houses heading, pitch, and zoom paramters, which are all optional, if undefined, these values default to 0

## Example ##

{% highlight js linenos %}
    var p = Popcorn( "#video" ).googlemap({
      start: 5,
      end: 15,
      type: "ROADMAP",
      target: "map",
      lat: 43.665429,
      lng: -79.403323
    });
{% endhighlight %}

{% highlight js linenos %}
    var p = Popcorn( "#video" ).googlemap({
      start: 1,
      end: 5,
      type: "STREETVIEW",
      target: "map2",
      location: "Toronto, Ontario, Canada",
      onmaploaded: function( options, map ) {
        // map is a reference to the actual map object
        // options is the options object that was passed in initially
      }
    });
{% endhighlight %}
